<!DOCTYPE html>
<html>
<%- include('includes/head') %>
  <link rel="icon" href="/public/images/aiomain.ico">

  <body class="bg-bggray text-gray-50 min-h-screen">
    <%- include('includes/header') %>
      <% if(user.displayedGuilds){ %>
        <h1 class="text-center mt-8 mb-2 text-5xl font-bold">Select a server</h1>
        <div
          class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-x-8 gap-y-10 p-8 justify-items-center container mx-auto">
          <% user.displayedGuilds.forEach(function(guild) { %>
            <div class="flex flex-col items-center justify-center rounded-2xl w-[10rem] md:w-[16rem]">
              <div class="flex items-center justify-center relative overflow-hidden rounded-2xl">
                <div class="
              flex
              items-center
              justify-center
              h-[11.25rem]
              w-[10rem]
              md:w-[16rem]
              bg-center bg-cover bg-no-repeat
              blur-xl
              relative
              border border-black
            " style="background-image: url('<%= guild.iconURL %>')"></div>
                <img src="<%= guild.iconURL %>" class="rounded-full absolute border-2 border-white" width="100"
                  height="100" />
              </div>
              <div class="flex justify-center items-center w-[10rem] md:w-[16rem] py-4">
                <div class="flex-1 flex justify-start items-center">
                  <h3 class="text-lg font-semibold">
                    <%= guild.name %>
                  </h3>
                </div>
                <div class="flex-1 flex justify-end items-center">
                  <% if(guild.settingsUrl.includes('discordapp.com')) { %>
                    <a href="<%= guild.settingsUrl %>"><button
                        class="px-3 py-1 rounded-md bg-primary transition-opacity duration-300 hover:opacity-70">
                        Invite
                      </button></a>
                    <% } else { %>
                      <a href="<%= guild.settingsUrl %>"><button
                          class="px-3 py-1 rounded-md bg-primary transition-opacity duration-300 hover:opacity-70">
                          Manage
                        </button></a>
                      <% } %>
                </div>
              </div>
            </div>
            <% }); } else { %>
              <div class="flex items-center justify-center w-full p-8">
                <h2 class="text-xl font-bold mx-auto">
                  No server to display. Make sure you are logged in with the right account and try again.
                </h2>
              </div>
              <% } %>
        </div>

        <%- include('includes/footer') %>
  </body>

</html>